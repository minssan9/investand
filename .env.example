# ================================================================
# KOSPI Fear & Greed Index - Environment Configuration
# ================================================================
# Copy this file to .env and update the values for your environment
# For production deployment, ensure all security-sensitive values are updated

# ================================================================
# APPLICATION SETTINGS
# ================================================================
NODE_ENV=development
PORT=3000
FRONTEND_PORT=80
BACKEND_PORT=3000

# Application URLs
FRONTEND_URL=http://localhost
VITE_APP_TITLE=KOSPI Fear & Greed Index
VITE_API_BASE_URL=http://localhost:3000/api

# ================================================================
# DATABASE CONFIGURATION
# ================================================================
# Database Engine (mysql:8.0 for dev, postgres:15-alpine for prod)
DATABASE_IMAGE=mysql:8.0
DATABASE_NAME=kospi_fg_index
DATABASE_USER=fg_user
DATABASE_PASSWORD=your_secure_database_password
DATABASE_PORT=3306

# Database URL for Prisma ORM (match above settings)
DATABASE_URL="mysql://fg_user:your_secure_database_password@localhost:3306/kospi_fg_index"

# Database Connection Pool Settings
DB_CONNECTION_POOL_MIN=2
DB_CONNECTION_POOL_MAX=10
DB_CONNECTION_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000

# Production PostgreSQL example:
# DATABASE_IMAGE=postgres:15-alpine
# DATABASE_URL="postgresql://fg_user:password@localhost:5432/kospi_fg_index"
# DATABASE_PORT=5432

# ================================================================
# REDIS CACHE & SESSION STORE
# ================================================================
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_MAX_MEMORY=512mb
REDIS_URL=redis://:your_redis_password@localhost:6379/0

# ================================================================
# SECURITY & AUTHENTICATION
# ================================================================
JWT_SECRET=your_jwt_secret_minimum_32_characters_long_please_change_this
ADMIN_PASSWORD=your_secure_admin_password

# CORS Configuration
CORS_ENABLED=true
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:80
HELMET_ENABLED=true

# ================================================================
# KOREAN FINANCIAL DATA APIs (REQUIRED)
# ================================================================
# DART (Data Analysis, Retrieval and Transfer System) - ESSENTIAL
# Get your key from: https://opendart.fss.or.kr/
DART_API_KEY=your_dart_api_key

# Korea Investment & Securities API
# Get from: https://apiportal.koreainvestment.com/
KIS_API_KEY=your_korea_investment_api_key
KIS_API_SECRET=your_korea_investment_api_secret

# Bank of Korea Economic Statistics API
# Get from: https://ecos.bok.or.kr/
BOK_API_KEY=your_bank_of_korea_api_key

# ================================================================
# DATA COLLECTION & SCHEDULING
# ================================================================
ENABLE_SCHEDULER=true
SCHEDULER_TIMEZONE=Asia/Seoul

# Data collection schedule (cron format)
# Default: 4:00 PM KST on weekdays (after market close)
DATA_COLLECTION_CRON=0 16 * * 1-5
WEEKEND_DATA_COLLECTION=false

# ================================================================
# PERFORMANCE & CACHING
# ================================================================
ENABLE_CACHE=true
CACHE_TTL=3600
CACHE_TTL_MINUTES=60

# ================================================================
# RATE LIMITING
# ================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX_REQUESTS=100

# ================================================================
# LOGGING & MONITORING
# ================================================================
LOG_LEVEL=info
LOG_FILE_PATH=logs/app.log

# Error Tracking (Optional)
# SENTRY_DSN=https://your-sentry-dsn-here

# ================================================================
# EXTERNAL SERVICES & NOTIFICATIONS (OPTIONAL)
# ================================================================
# Email Configuration for Alerts
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your_app_password

# Slack Notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook

# Alert Configuration
# ALERT_EMAIL=alerts@yourdomain.com
# CERTBOT_EMAIL=admin@yourdomain.com

# ================================================================
# CRYPTOCURRENCY APIs (OPTIONAL)
# ================================================================
# Upbit Exchange API
# UPBIT_ACCESS_KEY=your_upbit_access_key
# UPBIT_SECRET_KEY=your_upbit_secret_key

# ================================================================
# DEVELOPMENT & TESTING
# ================================================================
DEBUG=false

# Test Database (if different from main)
# TEST_DATABASE_URL=mysql://test_user:test_pass@localhost:3306/test_db

# ================================================================
# PRODUCTION DEPLOYMENT SETTINGS
# ================================================================
# Environment Profile (controls Docker Compose profiles)
ENVIRONMENT=development

# Production Domain and SSL
# DOMAIN=yourdomain.com
# SSL_EMAIL=admin@yourdomain.com

# GitHub Container Registry (for CI/CD)
# GITHUB_TOKEN=your_github_token
# GITHUB_ACTOR=your_github_username

# S3 Backup Configuration (Optional)
# BACKUP_S3_BUCKET=fg-index-backups
# BACKUP_S3_ACCESS_KEY=your_s3_access_key
# BACKUP_S3_SECRET_KEY=your_s3_secret_key

# Monitoring & Grafana
# GRAFANA_PASSWORD=admin

# ================================================================
# DOCKER COMPOSE SPECIFIC VARIABLES
# ================================================================
# These variables are specifically used by docker-compose.yml

# Port Mappings
FRONTEND_PORT=80
BACKEND_PORT=3000
DATABASE_PORT=3306
REDIS_PORT=6379

# Database Configuration
DATABASE_IMAGE=mysql:8.0
DATABASE_NAME=kospi_fg_index
DATABASE_USER=fg_user
DATABASE_PASSWORD=your_secure_database_password

# Redis Configuration
REDIS_PASSWORD=your_redis_password
REDIS_MAX_MEMORY=512mb

# Grafana Admin Password
GRAFANA_PASSWORD=admin

# ================================================================
# PRODUCTION ENVIRONMENT EXAMPLE
# ================================================================
# For production deployment, update these values:

# NODE_ENV=production
# DATABASE_IMAGE=postgres:15-alpine
# DATABASE_URL="postgresql://fg_user:secure_password@database:5432/fg_index_prod"
# DATABASE_NAME=fg_index_prod
# DATABASE_PASSWORD=secure_database_password
# REDIS_PASSWORD=secure_redis_password
# JWT_SECRET=generated_secure_jwt_secret_minimum_32_characters_long
# ADMIN_PASSWORD=secure_admin_password
# FRONTEND_URL=https://yourdomain.com
# VITE_API_BASE_URL=https://api.yourdomain.com/api
# ENVIRONMENT=production

# ================================================================
# SECURITY NOTES
# ================================================================
# 1. Never commit this file with real credentials to version control
# 2. For production, use strong passwords and change all defaults
# 3. Ensure DATABASE_URL matches your database configuration
# 4. DART_API_KEY is essential for Korean financial data collection
# 5. JWT_SECRET must be at least 32 characters long and cryptographically secure
# 6. Use environment-specific values for production deployment
# 7. Consider using Docker secrets or external secret management for production
# 8. Regularly rotate API keys and passwords
# 9. Use HTTPS in production and configure proper CORS origins
# 10. Enable proper firewall rules for database and Redis ports
